# config.py
TOKEN = "YOUR_TELEGRAM_BOT_TOKEN"
# extensions.py
import requests
import json

class APIException(Exception):
    pass

class CurrencyConverter:
    @staticmethod
    def get_price(base, quote, amount):
        try:
            response = requests.get(f"https://api.exchangerate-api.com/v4/latest/{base}")
            data = response.json()
            if quote not in data['rates']:
                raise APIException(f"Валюта {quote} не найдена.")
            if base not in data['rates']:
                raise APIException(f"Валюта {base} не найдена.")
            if amount <= 0:
                raise APIException("Количество должно быть положительным числом.")

            base_price = data['rates'][base]
            quote_price = data['rates'][quote]
            total_amount = (quote_price / base_price) * amount
            
            return total_amount
        except requests.exceptions.RequestException as e:
            raise APIException(f"Ошибка при подключении к API: {str(e)}")
# main.py
import telebot
from extensions import CurrencyConverter, APIException
from config import TOKEN

bot = telebot.TeleBot(TOKEN)

@bot.message_handler(commands=['start', 'help'])
def send_welcome(message):
    bot.reply_to(message, "Чтобы получить цену валюты, введите: \n<имя валюты> <валюта, в которой хотите узнать цену> <количество>\n\n"
                          "Например: доллар рубль 100")

@bot.message_handler(commands=['values'])
def send_values(message):
    bot.reply_to(message, "Доступные валюты: \nдоллар\nевро\nрубль")

@bot.message_handler(func=lambda message: True)
def get_currency_price(message):
    try:
        values = message.text.split()
        if len(values) != 3:
            raise APIException("Неверное количество параметров. Используйте: <валюта> <валюта для конвертации> <количество>")

        base, quote, amount = values[0], values[1], float(values[2])
        total_amount = CurrencyConverter.get_price(base, quote, amount)
        response_message = f"{amount} {base} = {total_amount} {quote}"
        bot.send_message(message.chat.id, response_message)
    except APIException as e:
        bot.send_message(message.chat.id, f"Ошибка: {str(e)}")
    except ValueError:
        bot.send_message(message.chat.id, "Ошибка: Неверное значение для количества. Введите число.")
    except Exception as e:
        bot.send_message(message.chat.id, f"Неизвестная ошибка: {str(e)}")

if __name__ == "__main__":
    bot.polling(none_stop=True)


Установите необходимые библиотеки, если они еще не установлены:
pip install pytelegrambotapi requests
Замените YOUR_TELEGRAM_BOT_TOKEN в config.py на токен вашего бота, который вы получили от BotFather в Telegram.

Запустите бота:

python main.py